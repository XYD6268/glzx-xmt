# 摄影比赛投票系统

一个基于Flask的摄影比赛投票管理系统，支持三级用户权限管理、照片审核、投票功能等。

## 功能特点

### 🔐 三级权限系统
- **普通用户 (Level 1)**: 注册、登录、上传照片、投票、管理自己的照片
- **普通管理员 (Level 2)**: 所有普通用户权限 + 审核照片、删除任何照片、访问管理面板
- **系统管理员 (Level 3)**: 所有权限 + 系统设置、用户管理

### 📸 照片管理
- 多文件上传支持
- 自动生成缩略图 (180x120)
- 照片审核机制（待审核/已通过/已拒绝）
- 支持点击放大查看原图

### 🗳️ 投票系统
- 防重复投票机制
- 实时票数更新
- 可撤销投票功能

### 📱 响应式设计
- 电脑端：一行显示4张照片
- 手机端：一行显示2张照片
- 深色简约风格界面

## 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
# SQLite版本（推荐测试使用）
python app_test.py

# MySQL版本（需要配置数据库）
python app.py
```

### 3. 访问系统
- 打开浏览器访问：http://127.0.0.1:5000
- 默认管理员账号：`admin` / `admin123`

## 目录结构
```
├── app.py              # MySQL版本主程序
├── app_test.py         # SQLite版本主程序
├── requirements.txt    # 依赖包列表
├── static/            # 静态文件
│   ├── uploads/       # 原图存储
│   └── thumbs/        # 缩略图存储
└── templates/         # HTML模板
    ├── index.html     # 主页
    ├── login.html     # 登录页
    ├── register.html  # 注册页
    ├── upload.html    # 上传页
    ├── my_photos.html # 我的照片
    ├── admin.html     # 管理面板
    ├── settings.html  # 系统设置
    └── manage_users.html # 用户管理
```

## 系统配置

### MySQL版本配置
修改 `app.py` 中的数据库连接字符串：
```python
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql+pymysql://用户名:密码@localhost/数据库名'
```

### 安全设置
修改密钥：
```python
app.config['SECRET_KEY'] = 'your-secret-key-here'
```

## 使用说明

### 普通用户操作
1. 注册账号并登录
2. 上传参赛照片（支持多选）
3. 在主页浏览已审核通过的照片
4. 为喜欢的照片投票
5. 在"我的照片"中查看上传状态

### 管理员操作
1. 使用管理员账号登录
2. 访问"管理面板"审核待审核照片
3. 可以通过/拒绝/删除用户上传的照片
4. 管理所有照片和投票数据

### 系统管理员操作
1. 使用系统管理员账号登录
2. 在"系统设置"中配置比赛标题、开关投票/上传功能
3. 在"用户管理"中管理用户角色和状态
4. 拥有所有系统权限

## 技术栈
- **后端**: Flask + SQLAlchemy
- **数据库**: SQLite / MySQL
- **前端**: HTML + CSS + JavaScript
- **图像处理**: Pillow (PIL)
- **安全**: Werkzeug (密码哈希、文件安全)

## 注意事项
- 上传的照片会自动生成缩略图用于列表展示
- 所有上传的照片需要管理员审核后才能公开显示
- 每个用户对每张照片只能投一次票
- 系统管理员账号请妥善保管，不要泄露

## 许可证
本项目仅供学习和教育用途使用。
